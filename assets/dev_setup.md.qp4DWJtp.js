import{_ as a,o as e,c as i,a3 as n}from"./chunks/framework.CqFBhNnV.js";const b=JSON.parse('{"title":"开发环境搭建","description":"","frontmatter":{"title":"开发环境搭建","order":1},"headers":[],"relativePath":"dev/setup.md","filePath":"dev/setup.md","lastUpdated":1772007002000}'),t={name:"dev/setup.md"};function l(p,s,r,d,h,o){return e(),i("div",null,[...s[0]||(s[0]=[n(`<h1 id="开发环境搭建" tabindex="-1">开发环境搭建 <a class="header-anchor" href="#开发环境搭建" aria-label="Permalink to &quot;开发环境搭建&quot;">​</a></h1><h2 id="前置依赖" tabindex="-1">前置依赖 <a class="header-anchor" href="#前置依赖" aria-label="Permalink to &quot;前置依赖&quot;">​</a></h2><table tabindex="0"><thead><tr><th>工具</th><th>版本要求</th><th>说明</th></tr></thead><tbody><tr><td>JDK</td><td>11 或更高</td><td>推荐使用 JDK 17 或 21</td></tr><tr><td>Node.js</td><td>18 或更高</td><td>前端开发依赖</td></tr><tr><td>Git</td><td>任意版本</td><td></td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">推荐工具</p><p>后端开发推荐使用 <strong>IntelliJ IDEA</strong>（社区版即可）。前端开发推荐使用 <strong>VS Code</strong> 或 <strong>WebStorm</strong>。</p></div><h2 id="克隆项目" tabindex="-1">克隆项目 <a class="header-anchor" href="#克隆项目" aria-label="Permalink to &quot;克隆项目&quot;">​</a></h2><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/project-fredica/fredica.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fredica</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="启动桌面应用-主入口" tabindex="-1">启动桌面应用（主入口） <a class="header-anchor" href="#启动桌面应用-主入口" aria-label="Permalink to &quot;启动桌面应用（主入口）&quot;">​</a></h2><p>Fredica 的主界面是 Compose Desktop 应用，内嵌 WebView 展示前端页面。</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :composeApp:run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>应用启动后会：</p><ol><li>在 <code>7631</code> 端口启动 Ktor API 服务器</li><li>自动打开内置浏览器，加载 Web UI（<code>http://localhost:7630</code>）</li></ol><h2 id="分模块开发" tabindex="-1">分模块开发 <a class="header-anchor" href="#分模块开发" aria-label="Permalink to &quot;分模块开发&quot;">​</a></h2><h3 id="仅启动后端-api-服务器" tabindex="-1">仅启动后端 API 服务器 <a class="header-anchor" href="#仅启动后端-api-服务器" aria-label="Permalink to &quot;仅启动后端 API 服务器&quot;">​</a></h3><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :composeApp:run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>目前 API 服务器集成在 <code>composeApp</code> 模块中，通过桌面应用进程启动。</p></blockquote><h3 id="独立开发前端" tabindex="-1">独立开发前端 <a class="header-anchor" href="#独立开发前端" aria-label="Permalink to &quot;独立开发前端&quot;">​</a></h3><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装前端依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动前端开发服务器（热更新）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fredica-webui</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>前端开发服务器默认运行在 <code>http://localhost:7630</code>。</p><p>开发前端时，需要同时运行后端（桌面应用），并在 Web UI 连接配置页面填写：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Schema:  http</span></span>
<span class="line"><span>Domain:  localhost</span></span>
<span class="line"><span>Port:    7631</span></span>
<span class="line"><span>Token:   (从桌面应用设置中获取)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="前端构建产物说明" tabindex="-1">前端构建产物说明 <a class="header-anchor" href="#前端构建产物说明" aria-label="Permalink to &quot;前端构建产物说明&quot;">​</a></h3><p>前端构建后的静态文件嵌入到 JAR 包中，由 Ktor 提供服务。开发模式下两者分离运行，生产模式下合并在同一进程。</p><h2 id="构建共享模块" tabindex="-1">构建共享模块 <a class="header-anchor" href="#构建共享模块" aria-label="Permalink to &quot;构建共享模块&quot;">​</a></h2><p><code>shared</code> 模块包含跨平台的核心业务逻辑，修改后需要重新构建以更新生成的代码（如 JSON Schema）：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :shared:build</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="环境变量与配置" tabindex="-1">环境变量与配置 <a class="header-anchor" href="#环境变量与配置" aria-label="Permalink to &quot;环境变量与配置&quot;">​</a></h2><p>开发时无需额外环境变量。以下为本地配置文件说明：</p><table tabindex="0"><thead><tr><th>文件</th><th>说明</th></tr></thead><tbody><tr><td><code>local.properties</code></td><td>本地构建配置（SDK 路径等），不提交到 Git</td></tr></tbody></table><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><details class="details custom-block"><summary>Gradle 构建卡住或报网络错误</summary><p>可能是下载 Gradle Wrapper 或依赖时网络超时。配置系统代理或设置 Gradle 镜像源：</p><p>在 <code>~/.gradle/gradle.properties</code> 中添加：</p><div class="language-properties vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">systemProp.https.proxyHost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">systemProp.https.proxyPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=7890</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></details><details class="details custom-block"><summary>前端页面空白</summary><p>检查：</p><ol><li>后端是否正在运行（<code>http://localhost:7631/api/v1/ping</code> 是否返回 <code>pong</code>）</li><li>Web UI 的连接配置（Schema / Domain / Port / Token）是否正确</li><li>浏览器控制台是否有 CORS 或 401 错误</li></ol></details>`,31)])])}const k=a(t,[["render",l]]);export{b as __pageData,k as default};
